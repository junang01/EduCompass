<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>회원가입 테스트</title>
</head>
<body>
  <h2>EduCompass 회원가입</h2>
  <form onsubmit="return false;">
    <input type="text" id="uname" placeholder="이름"><br>
    <input type="email" id="umail" placeholder="이메일"><br>
    <input type="password" id="pwd" placeholder="비밀번호"><br>
    <input type="password" id="pwdcheck" placeholder="비밀번호 확인"><br>
    <input type="text" id="school" placeholder="학교"><br>
    <select id="grade">
      <option value="0">학년 선택</option>
      <option value="1">1학년</option>
      <option value="2">2학년</option>
    </select><br>
    <select id="line">
      <option value="0">계열 선택</option>
      <option value="liberal">문과</option>
      <option value="science">이과</option>
    </select><br>
    <button type="button" id="submitButton">회원가입</button>
  </form>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const nameInput = document.getElementById("uname");
      const emailInput = document.getElementById("umail");
      const passwordInput = document.getElementById("pwd");
      const passwordCheckInput = document.getElementById("pwdcheck");
      const schoolInput = document.getElementById("school");
      const gradeSelect = document.getElementById("grade");
      const lineSelect = document.getElementById("line");
      const submitButton = document.getElementById("submitButton");

      function validateEmail(email) {
        return /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email);
      }

      function validatePassword(password) {
        return /^(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(password);
      }

      function checkFormValidity() {
        const isFormValid =
          nameInput.value.trim() !== "" &&
          validateEmail(emailInput.value.trim()) &&
          validatePassword(passwordInput.value.trim()) &&
          passwordInput.value.trim() === passwordCheckInput.value.trim() &&
          schoolInput.value.trim() !== "" &&
          gradeSelect.value !== "0" &&
          lineSelect.value !== "0";

        submitButton.disabled = !isFormValid;
      }

      [
        nameInput,
        emailInput,
        passwordInput,
        passwordCheckInput,
        schoolInput,
        gradeSelect,
        lineSelect,
      ].forEach((input) => {
        input.addEventListener("input", checkFormValidity);
      });

      submitButton.addEventListener("click", function () {
        console.log("✅ 회원가입 버튼 클릭됨");

        if (!nameInput.value.trim()) {
          alert("이름을 입력해주세요.");
          nameInput.focus();
          return;
        }
        if (!validateEmail(emailInput.value.trim())) {
          alert("이메일 형식이 올바르지 않습니다.");
          emailInput.focus();
          return;
        }
        if (!validatePassword(passwordInput.value.trim())) {
          alert("비밀번호는 8자 이상, 숫자, 특수문자를 포함해야 합니다.");
          passwordInput.focus();
          return;
        }
        if (passwordInput.value.trim() !== passwordCheckInput.value.trim()) {
          alert("비밀번호가 일치하지 않습니다.");
          passwordCheckInput.focus();
          return;
        }
        if (!schoolInput.value.trim()) {
          alert("학교를 입력해주세요.");
          schoolInput.focus();
          return;
        }
        if (gradeSelect.value === "0") {
          alert("학년을 선택해주세요.");
          gradeSelect.focus();
          return;
        }
        if (lineSelect.value === "0") {
          alert("계열을 선택해주세요.");
          lineSelect.focus();
          return;
        }

        alert("회원가입이 완료되었습니다!");
        location.href = "joinComplete.html";
      });

      checkFormValidity(); // 초기 상태 버튼 비활성화
    });
  </script>
</body>
</html>
